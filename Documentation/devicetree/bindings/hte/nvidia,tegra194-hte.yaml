# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/hte/nvidia,tegra194-hte.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Tegra194 on chip generic hardware timestamping engine (HTE)

maintainers:
  - Dipen Patel <dipenp@nvidia.com>

description: |
  Tegra194 SoC has multiple generic hardware timestamping engines which can
  monitor subset of GPIO and on chip IRQ lines for the state change, upon
  detection it will record timestamp (taken from system counter) in its
  internal hardware FIFO. It has a bitmap array arranged in 32bit slices where
  each bit represent signal/line to enable or disable for the hardware
  timestamping.

properties:
  compatible:
    enum:
      - nvidia,tegra194-gte-aon
      - nvidia,tegra194-gte-lic

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  nvidia,int-threshold:
    description:
      HTE device generates its interrupt based on this u32 FIFO threshold
      value. The recommended value is 1.
    minimum: 1
    maximum: 256

  nvidia,slices:
    type: int
    description:
      HTE lines are arranged in 32 bit slice where each bit represents different
      line/signal that it can enable/configure for the timestamp. It is u32
      property and depends on the HTE instance in the chip.
    enum: [3, 11]

  '#hardware-timestamp-cells':
    const: 1

required:
  - compatible
  - reg
  - interrupts
  - nvidia,slices
  - "#hardware-timestamp-cells"

additionalProperties: false

examples:
  - |
    tegra_hte_aon: hardware-timestamp@c1e0000 {
              compatible = "nvidia,tegra194-gte-aon";
              reg = <0xc1e0000 0x10000>;
              interrupts = <0 13 0x4>;
              nvidia,int-threshold = <1>;
              nvidia,slices = <3>;
              #hardware-timestamp-cells = <1>;
    };

  - |
    tegra_hte_lic: hardware-timestamp@3aa0000 {
              compatible = "nvidia,tegra194-gte-lic";
              reg = <0x3aa0000 0x10000>;
              interrupts = <0 11 0x4>;
              nvidia,int-threshold = <1>;
              nvidia,slices = <11>;
              #hardware-timestamp-cells = <1>;
    };

...
